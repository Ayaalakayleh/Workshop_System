@using Workshop.Resources;

@using Microsoft.Extensions.Localization
@inject IStringLocalizer<Common> Common
@inject IStringLocalizer<Messages> Message

@model Workshop.Core.DTOs.WorkshopMovement.WorckshopPriceTable

<style>
    .modal .table-bordered > tbody > tr > td {
        border-left: 1px solid #e7e7e7;
        border-bottom: 1px solid #e7e7e7;
    }
</style>
<div class="row">


    <div class="col-lg-12">
        <div class="row" id="MaintenanacePart2">
            <div id="MaintenanceCard2" class="col-12">
                @if (Model.Tablecol != null)
                {
                    <table class="table table-bordered table-hover w-100 text-center bg-white" id="tblMainteneance299">
                        <thead>
                            <tr>
                                <th>
                                    @Common["WorkShop_Services"]
                                </th>
                                @foreach (var item in Model.Tablecol)
                                {
                                    <th>
                                        @item.ServiceName
                                    </th>
                                }
                            </tr>
                        </thead>
                        <tbody id="tblData2">
                            @foreach (var row in Model.TableRows)
                            {
                                <tr>
                                    <td>
                                        @row.WorkShopName
                                    </td>
                                    @foreach (var col in Model.Tablecol)
                                    {
                                        var item = Model.WorckshopPrice.Where(a => a.WorkShopId == row.WorkShopId && a.ServiceId == col.ServiceId).FirstOrDefault();

                                        if (item != null)
                                        {
                                            <td>
                                                @item.Price
                                            </td>
                                        }
                                        else
                                        {
                                            <td>
                                            </td>
                                        }

                                    }


                                </tr>
                            }
                        </tbody>
                    </table>
                }



            </div>
        </div>

    </div>


</div>
@*<div class="text-center mt-4">
        <button type="button" id="btnCreate" onclick="Transfer();" class="btn btn-primary"><i class="fa fa-save"></i>&nbsp;@Common["Save"]</button>
    </div>*@

<script>
    var rowCount = $('#tblMainteneance299  >tbody >tr').length;

    $(document).ready(function () {
              var d = new Date(),
            h = d.getHours(),
            m = d.getMinutes();
        if (h < 10) h = '0' + h;
        if (m < 10) m = '0' + m;

        $('#RecivedcurrentTime').val(h + ":" + m);
        $('#ExitTime').val(h + ":" + m);
        getCompanyServices();

        var table = $('#tblMainteneance299').DataTable({

            responsive: true,
            orderCellsTop: true,
            ordering: false,
            fixedHeader: false,
            info: false,
            lengthChange: false,
            searching: false, paging: false, info: false,
              language: {
                    searchPlaceholder: "@Common["Search"]",
                    lengthMenu: "@Common["Display  "]_MENU_  @Common["RowPerPage"]",
                    emptyTable: "@Common["emptyTable"]"
                },
            buttons: [
                {
                    extend: 'copy',
                    text: '<i class="fa fa-copy"></i>',
                    className: 'btn btn-outline-secondary btn-icon rounded-circle hover-effect-dot',
                    title:"@Common["Copy"]"
                },
                {
                    extend: 'csv',
                    text: '<i class="fa fa-file-excel"></i>',
                    className: 'btn btn-outline-secondary btn-icon rounded-circle hover-effect-dot',
                    title:"@Common["Excel"]"
                },
                {
                    extend: 'pdf',
                    text: '<i class="fa fa-pdf"></i>',
                    className: 'btn btn-outline-secondary btn-icon rounded-circle hover-effect-dot',
                    title:"@Common["PDF"]"
                },
                {
                    extend: 'print',
                    text: '<i class="fa fa-print"></i>',
                    className: 'btn btn-outline-secondary btn-icon rounded-circle hover-effect-dot',
                    titleAttr:"@Common["Print"]",
                    customize: function (win) {
                        $(win.document.body).addClass('white-bg');
                        $(win.document.body).css('font-size', '10px');
                        $(win.document.body).find('table')
                            .addClass('compact')
                            .css('font-size', 'inherit');
                    }
                }
            ]
        });

    });
</script>
